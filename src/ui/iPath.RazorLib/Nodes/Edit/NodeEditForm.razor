@namespace iPath.Blazor.Componenents.Nodes

@inject IStringLocalizer T

<MudForm Model="Model" Class="@Class">
    <MudGrid Spacing="1">
        <MudItem xs="12">
            <MudTextField Label=@T["Title"] @bind-Value="Model.Title" Variant="Variant" Margin="@Margin"
                          AutoFocus="true" />
        </MudItem>
        <MudItem xs="12">
            <MudTextField Label=@T["Subtitle"] @bind-Value="Model.Subtitle" Variant="Variant" Margin="@Margin" ShrinkLabel="true" />
        </MudItem>
        <MudItem xs="12" sm="8">
            <MudTextField Label=@T["Case Type"] @bind-Value="Model.CaseType" Variant="Variant" Margin="@Margin" ShrinkLabel="true" />
        </MudItem>
        <MudItem xs="12" sm="4">
            <MudTextField Label=@T["Accession No"] @bind-Value="Model.AccessionNo" Variant="Variant" Margin="@Margin" ShrinkLabel="true" />
        </MudItem>
        <MudItem xs="12">
            <MudPaper Elevation="0" Class="mt-4 mb-2">
                <MudText Typo="Typo.subtitle2">@T["Desciption"]</MudText>

                @if (useQuestionnaire)
                {
                    @* <iPath.LHCForms.LhcForm @ref="lhcForm" /> *@
                }
                else if (useHtmlEditor)
                {
                    <MudExRichTextEditor.MudExRichTextEdit @bind-Value="Model.Text" />
                }
                else
                {
                    <MudTextField @bind-Value="Model.Text" Lines="6" AutoGrow="true"
                                  Variant="Variant" />
                }
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudForm>

@code {
    [Parameter, EditorRequired]
    public NodeDescription Model { get; set; }

    [Parameter]
    public string Class { get; set; }

    [Parameter]
    public Variant Variant { get; set; } = Variant.Outlined;

    [Parameter]
    public Margin Margin { get; set; } = Margin.Dense;

    bool useQuestionnaire;
    bool useHtmlEditor = true;
}
