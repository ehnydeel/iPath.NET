@inject CodingService_v1 srv

<MudAutocomplete Label="@Label" Variant="Variant"
                 T="CodedConcept" MaxItems="100"
                 @bind-Value="Code"
                 @bind-Value:after="OnCodeChanged"
                 ToStringFunc=@(x => x is null ? "" : $"{x.Display} [{x.Code}]")
                 SearchFunc="srv.FindMorphoConcepts"
                 Clearable="true">
</MudAutocomplete>

@code {
    [Parameter]
    public CodedConcept Code { get; set; }

    [Parameter]
    public EventCallback<CodedConcept> CodeChanged { get; set; }

    async Task OnCodeChanged()
    {
        CodeChanged.InvokeAsync(Code);
    }

    [Parameter]
    public string Label { get; set; } = "Morphology";

    [Parameter]
    public Variant Variant { get; set; } = Variant.Outlined;
}
