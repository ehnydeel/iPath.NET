@page "/admin/cms"
@using Tizzani.MudBlazor.HtmlEditor
@using iPath.Application.Features.CMS



<MudGrid>
    <MudItem xs="12" sm="6">
        <IPathHeader Title="static web content" Typo="Typo.h6">
            <ActionContent>
                <MudFab Size="Size.Small" EndIcon="@Icons.Material.Filled.Add" OnClick="AddContent" />
            </ActionContent>
        </IPathHeader>
        <MudDataGrid T="WebContentDto" ServerData="GetDataAsync" @bind-SelectedItem="SelectedItem" @ref="grid"
                     RowStyleFunc="SelectedRowStyle">
            <Columns>
                <PropertyColumn Property="x => x.Title" />
                <PropertyColumn Property="x => x.Owner.Username" />
                <PropertyColumn Property="x => x.CreatedOn" Format="d" />
            </Columns>
            <PagerContent>
                <MudDataGridPager T="WebContentDto" />
            </PagerContent>
        </MudDataGrid>
    </MudItem>
    <MudItem xs="12" sm="6">
        <IPathHeader Title="selected content" Typo="Typo.h6" />
        @if (SelectedModel is not null)
        {
            <MudForm Model="SelectedModel">
                <MudTextField Label="Title" @bind-Value="SelectedModel.Title" Variant="Variant.Outlined" ShrinkLabel="true" />

                <MudText Typo="Typo.subtitle1" Class="mt-2">Content</MudText>
                <MudHtmlEditor @bind-Html="SelectedModel.Body" Outlined="true" @ref="html">
                    <MudHtmlToolbarOptions InsertImage="false" /> <!-- This will exclude the "insert image" toolbar option -->
                </MudHtmlEditor>
            </MudForm>

            <MudStack Row Class="mt-2">
                <ProgressButton OnClick="Save" Text="Save"  />
                <ProgressButton OnClick="Delete" Text="Delete" Color="Color.Warning" />
            </MudStack>
        }
    </MudItem>
</MudGrid>




